EventSubmission=function(){return{init:function(){Common.logInfo("EventSubmission.init..."),jQuery("body").on("click",".event-manager-remove-uploaded-file",function(){return jQuery(this).closest(".event-manager-uploaded-file").remove(),!1}),0<jQuery("#event_start_time").length&&jQuery("#event_start_time").timepicker({timeFormat:wp_event_manager_event_submission.i18n_timepicker_format,step:wp_event_manager_event_submission.i18n_timepicker_step}),0<jQuery("#event_end_time").length&&jQuery("#event_end_time").timepicker({timeFormat:wp_event_manager_event_submission.i18n_timepicker_format,step:wp_event_manager_event_submission.i18n_timepicker_step}),0<jQuery('input[data-picker="timepicker"]').length&&jQuery('input[data-picker="timepicker"]').timepicker({timeFormat:wp_event_manager_event_submission.i18n_timepicker_format,step:wp_event_manager_event_submission.i18n_timepicker_step}),0<jQuery('input[data-picker="datepicker"]#event_start_date').length&&jQuery('input[data-picker="datepicker"]#event_start_date').datepicker({minDate:0,dateFormat:wp_event_manager_event_submission.i18n_datepicker_format}),0<jQuery('input[data-picker="datepicker"]#event_end_date').length&&jQuery('input[data-picker="datepicker"]#event_end_date').datepicker({dateFormat:wp_event_manager_event_submission.i18n_datepicker_format,beforeShow:function(e,t){var n=jQuery('input[data-picker="datepicker"]#event_start_date').datepicker("getDate");jQuery(this).datepicker("option","minDate",n)}}).on("change",function(){jQuery("#event_registration_deadline").datepicker("destroy"),jQuery('input[data-picker="datepicker"]#event_registration_deadline').datepicker({minDate:0,maxDate:jQuery("#event_end_date").val(),dateFormat:wp_event_manager_event_submission.i18n_datepicker_format})}),0<jQuery('input[data-picker="datepicker"]#event_registration_deadline').length&&jQuery('input[data-picker="datepicker"]#event_registration_deadline').datepicker({minDate:0,maxDate:jQuery("#event_end_date").val(),dateFormat:wp_event_manager_event_submission.i18n_datepicker_format}),0<jQuery('input[data-picker="datepicker"]').length&&jQuery('input[data-picker="datepicker"]').datepicker({minDate:0,dateFormat:wp_event_manager_event_submission.i18n_datepicker_format}),0<jQuery("#event_online").length&&"yes"==jQuery("input[name=event_online]:checked").val()&&(0<jQuery(".fieldset-event_venue_name").length&&0<jQuery("input[name=event_venue_name]").length&&(jQuery("input[name=event_venue_name]").attr("required")&&jQuery("input[name=event_venue_name]").attr("required",!1),jQuery(".fieldset-event_venue_name").hide()),0<jQuery(".fieldset-event_address").length&&0<jQuery("input[name=event_address]").length&&(jQuery("input[name=event_address]").attr("required")&&jQuery("input[name=event_address]").attr("required",!1),jQuery(".fieldset-event_address").hide()),0<jQuery(".fieldset-event_pincode").length&&0<jQuery("input[name=event_pincode]").length&&(jQuery("input[name=event_pincode]").attr("required")&&jQuery("input[name=event_pincode]").attr("required",!1),jQuery(".fieldset-event_pincode").hide()),0<jQuery(".fieldset-event_location").length&&0<jQuery("input[name=event_location]").length&&(jQuery("input[name=event_location]").attr("required")&&jQuery("input[name=event_location]").attr("required",!1),jQuery(".fieldset-event_location").hide()),0<jQuery(".fieldset-event_venue_ids").length&&jQuery(".fieldset-event_venue_ids").hide()),0<jQuery("#event_ticket_options").length&&"free"==jQuery("#event_ticket_options:checked").val()&&(jQuery("input[name=event_ticket_price]").attr("required")&&jQuery("input[name=event_ticket_price]").attr("required",!1),jQuery(".fieldset-event_ticket_price").hide()),jQuery("input[name=event_online]").on("change",EventSubmission.actions.onlineEvent),jQuery("input[name=event_ticket_options]").on("change",EventSubmission.actions.eventTicketOptions),jQuery("body").on("click",".wpem_add_organizer",EventSubmission.actions.addOrganizer),jQuery("body").on("click",".wpem_add_venue",EventSubmission.actions.addVenue)},actions:{onlineEvent:function(e){e.preventDefault(),Common.logInfo("EventDashboard.actions.onlineEvent..."),0<jQuery("#event_online").length&&("yes"==jQuery(this).val()?(0<jQuery(".fieldset-event_venue_name").length&&0<jQuery("input[name=event_venue_name]").length&&(jQuery("input[name=event_venue_name]").attr("required")&&jQuery("input[name=event_venue_name]").attr("required",!1),jQuery(".fieldset-event_venue_name").hide()),0<jQuery(".fieldset-event_address").length&&0<jQuery("input[name=event_address]").length&&(jQuery("input[name=event_address]").attr("required")&&jQuery("input[name=event_address]").attr("required",!1),jQuery(".fieldset-event_address").hide()),0<jQuery(".fieldset-event_pincode").length&&0<jQuery("input[name=event_pincode]").length&&(jQuery("input[name=event_pincode]").attr("required")&&jQuery("input[name=event_pincode]").attr("required",!1),jQuery(".fieldset-event_pincode").hide()),0<jQuery(".fieldset-event_location").length&&0<jQuery("input[name=event_location]").length&&(jQuery("input[name=event_location]").attr("required")&&jQuery("input[name=event_location]").attr("required",!1),jQuery(".fieldset-event_location").hide()),0<jQuery(".fieldset-event_venue_ids").length&&jQuery(".fieldset-event_venue_ids").hide()):(0<jQuery(".fieldset-event_venue_name").length&&0<jQuery("input[name=event_venue_name]").length&&(jQuery("input[name=event_venue_name]").attr("required")&&jQuery("input[name=event_venue_name]").attr("required",!0),jQuery(".fieldset-event_venue_name").show()),0<jQuery(".fieldset-event_address").length&&0<jQuery("input[name=event_address]").length&&(jQuery("input[name=event_address]").attr("required")&&jQuery("input[name=event_address]").attr("required",!0),jQuery(".fieldset-event_address").show()),0<jQuery(".fieldset-event_pincode").length&&0<jQuery("input[name=event_pincode]").length&&(jQuery("input[name=event_pincode]").attr("required")&&jQuery("input[name=event_pincode]").attr("required",!0),jQuery(".fieldset-event_pincode").show()),0<jQuery(".fieldset-event_location").length&&0<jQuery("input[name=event_location]").length&&(jQuery("input[name=event_location]").attr("required")&&jQuery("input[name=event_location]").attr("required",!0),jQuery(".fieldset-event_location").show()),0<jQuery(".fieldset-event_venue_ids").length&&jQuery(".fieldset-event_venue_ids").show()))},eventTicketOptions:function(e){e.preventDefault(),Common.logInfo("EventDashboard.actions.eventTicketOptions..."),0<jQuery("#event_ticket_options").length&&("free"==jQuery(this).val()?0<jQuery(".fieldset-event_ticket_price").length&&0<jQuery("input[name=event_ticket_price]").length&&(jQuery("input[name=event_ticket_price]").attr("required")&&jQuery("input[name=event_ticket_price]").attr("required",!1),jQuery(".fieldset-event_ticket_price").hide()):(0<jQuery(".fieldset-event_ticket_price").length&&0<jQuery("input[name=event_ticket_price]").length&&jQuery("input[name=event_ticket_price]").attr("required")&&jQuery("input[name=event_ticket_price]").attr("required",!0),jQuery(".fieldset-event_ticket_price").show()))},addOrganizer:function(e){jQuery("body #submit-organizer-form .wpem-form-footer .wpem-alert-danger").remove();var t=jQuery("body #submit-organizer-form").serialize(),n=tinyMCE.get("organizer_description").getContent(),r=new FormData;r.append("organizer_logo",jQuery("#organizer_logo")[0].files[0]),r.append("action","add_organizer"),r.append("form_data",t),r.append("organizer_description",n),jQuery.ajax({url:wp_event_manager_event_submission.ajax_url,type:"POST",dataType:"JSON",processData:!1,contentType:!1,data:r,success:function(e){200==e.code?(jQuery("#wpem_add_organizer_popup .wpem-modal-header-close .wpem-modal-close").trigger("click"),jQuery("select#event_organizer_ids").prepend('<option selected="selected" value="'+e.organizer.organizer_id+'">'+e.organizer.organizer_name+"</option>"),jQuery("#event_organizer_ids").trigger("chosen:updated"),jQuery("body #submit-organizer-form .event-manager-uploaded-files").remove(),jQuery("body #submit-organizer-form")[0].reset()):jQuery("body #submit-organizer-form .wpem-form-footer .wpem_add_organizer").after(e.message)}})},addVenue:function(e){jQuery("body #submit-venue-form .wpem-form-footer .wpem-alert-danger").remove();var t=jQuery("body #submit-venue-form").serialize(),n=tinyMCE.get("venue_description").getContent(),r=new FormData;r.append("venue_logo",jQuery("#venue_logo")[0].files[0]),r.append("action","add_venue"),r.append("form_data",t),r.append("venue_description",n),jQuery.ajax({url:wp_event_manager_event_submission.ajax_url,type:"POST",dataType:"JSON",processData:!1,contentType:!1,data:r,success:function(e){200==e.code?(jQuery("#wpem_add_venue_popup .wpem-modal-header-close .wpem-modal-close").trigger("click"),jQuery("select#event_venue_ids").append('<option selected="selected" value="'+e.venue.venue_id+'">'+e.venue.venue_name+"</option>"),jQuery("#event_venue_ids").trigger("chosen:updated"),jQuery("body #submit-venue-form .event-manager-uploaded-files").remove(),jQuery("body #submit-venue-form")[0].reset()):jQuery("body #submit-venue-form .wpem-form-footer .wpem_add_venue").after(e.message)}})}}}},EventSubmission=EventSubmission(),jQuery(document).ready(function(e){EventSubmission.init()});